---
title: 使用AEM Sites Optimizer進行預檢最佳化
description: 瞭解使用AEM Sites Optimizer預檢的機會。
source-git-commit: 214a9d7d4c7e498a8c2f39009e93c4c1f8f772b1
workflow-type: tm+mt
source-wordcount: '659'
ht-degree: 23%

---


# 預檢機會

![預檢機會](./assets/preflight/hero.png){align="center"}

AEM Sites Optimizer預檢機會可協助確保您的網頁在開始使用前已針對效能、SEO和使用者體驗最佳化。 透過識別潛在問題，例如連結損壞、缺少中繼標籤和協助工具問題，預檢檢查可讓內容作者和行銷人員在發佈過程的早期解決這些問題。 這種主動式方法可將發佈次優內容的風險降至最低，提升網站品質，並改善整體數位表現。 利用預檢機會可支援更順暢的工作流程、減少發佈後的修正，並有助於提高搜尋引擎排名和使用者滿意度。

## 機會

<!-- CARDS

* ../documentation/opportunities/invalid-or-missing-metadata.md
  {title=Canonical}
  {image=../assets/common/card-link.png}
* ../documentation/opportunities/broken-internal-links.md
  {title=Broken Internal Links}
  {image=../assets/common/card-link.png}
* ../documentation/opportunities/invalid-or-missing-metadata.md
  {title=Metatags}
  {image=../assets/common/card-code.png}
* ../documentation/opportunities/invalid-or-missing-metadata.md
  {title=H1 count}
  {image=../assets/common/card-code.png}
* ../documentation/opportunities/accessibility-issues.md
  {title=Accessibility}
  {image=../assets/common/card-puzzle.png}

-->
<!-- START CARDS HTML - DO NOT MODIFY BY HAND -->
<div class="columns">
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="Canonical">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/invalid-or-missing-metadata.md" title="規範" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-link.png" alt="規範"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" title="規範">規範</a>
                    </p>
                    <p class="is-size-6">了解規範機會，以及如何使用此機會改善 SEO 並防止重複內容的問題。</p>
                </div>
                <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
                    <span class="spectrum-Button-label has-no-wrap has-text-weight-bold">了解更多</span>
                </a>
            </div>
        </div>
    </div>
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="Broken Internal Links">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/broken-internal-links.md" title="損壞的內部連結" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-link.png" alt="損壞的內部連結"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        <a href="../documentation/opportunities/broken-internal-links.md" target="_blank" rel="referrer" title="損壞的內部連結">損壞的內部連結</a>
                    </p>
                    <p class="is-size-6">了解損壞的內部連結機會，以及如何使用此機會識別和修復網站上損壞或有問題的連結。</p>
                </div>
                <a href="../documentation/opportunities/broken-internal-links.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
                    <span class="spectrum-Button-label has-no-wrap has-text-weight-bold">了解更多</span>
                </a>
            </div>
        </div>
    </div>
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="Metatags">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/invalid-or-missing-metadata.md" title="中繼資料標記" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-code.png" alt="中繼資料標記"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" title="中繼資料標記">中繼資料標記</a>
                    </p>
                    <p class="is-size-6">了解中繼資料標記機會，以及如何使用此機會將頁面的中繼資料最佳化，獲得更好的 SEO 效能。</p>
                </div>
                <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
                    <span class="spectrum-Button-label has-no-wrap has-text-weight-bold">了解更多</span>
                </a>
            </div>
        </div>
    </div>
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="H1 count">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/invalid-or-missing-metadata.md" title="H1 計數" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-code.png" alt="H1 計數"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" title="H1 計數">H1 計數</a>
                    </p>
                    <p class="is-size-6">了解 H1 計數機會，以及如何使用此機會確保合適的標題結構和 SEO 最佳化。</p>
                </div>
                <a href="../documentation/opportunities/invalid-or-missing-metadata.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
                    <span class="spectrum-Button-label has-no-wrap has-text-weight-bold">了解更多</span>
                </a>
            </div>
        </div>
    </div>
    <div class="column is-half-tablet is-half-desktop is-one-third-widescreen" aria-label="Accessibility">
        <div class="card" style="height: 100%; display: flex; flex-direction: column; height: 100%;">
            <div class="card-image">
                <figure class="image x-is-16by9">
                    <a href="../documentation/opportunities/accessibility-issues.md" title="協助工具" target="_blank" rel="referrer">
                        <img class="is-bordered-r-small" src="../assets/common/card-puzzle.png" alt="協助工具"
                             style="width: 100%; aspect-ratio: 16 / 9; object-fit: cover; overflow: hidden; display: block; margin: auto;">
                    </a>
                </figure>
            </div>
            <div class="card-content is-padded-small" style="display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between;">
                <div class="top-card-content">
                    <p class="headline is-size-6 has-text-weight-bold">
                        <a href="../documentation/opportunities/accessibility-issues.md" target="_blank" rel="referrer" title="協助工具">協助工具</a>
                    </p>
                    <p class="is-size-6">了解協助工具機會，以及如何使用此機會確保所有使用者都能夠存取您的網站。</p>
                </div>
                <a href="../documentation/opportunities/accessibility-issues.md" target="_blank" rel="referrer" class="spectrum-Button spectrum-Button--outline spectrum-Button--primary spectrum-Button--sizeM" style="align-self: flex-start; margin-top: 1rem;">
                    <span class="spectrum-Button-label has-no-wrap has-text-weight-bold">了解更多</span>
                </a>
            </div>
        </div>
    </div>

</div>
<!-- END CARDS HTML - DO NOT MODIFY BY HAND -->

## 設定

AEM Sites Optimizer預檢機會識別需要在Universal Editor、Document-Based Preview或AEM Cloud Service中設定Preflight擴充功能，以便在發佈頁面之前先在您的頁面上執行Preflight稽核。

## 啟用使用者存取

若要使用Preflight擴充功能，請確定已在[Adobe Admin Console](https://adminconsole.adobe.com)中將您的使用者指派給下列至少一個AEM Sites Optimizer產品設定檔：

* AEM Sites Optimizer — 自動建議使用者
* AEM Sites Optimizer — 自動最佳化使用者

## 啟用預檢擴充功能

>[!BEGINTABS]

>[!TAB 通用編輯器]

若要在Universal Editor中設定Preflight，請執行下列步驟：

1. 在下列位置開啟&#x200B;**Extension Manager**：
   [https://experience.adobe.com/#/@org/aem/extension-manager/universal-editor](https://experience.adobe.com/#/@org/aem/extension-manager/universal-editor)
1. 找到&#x200B;**AEM Sites Optimizer預檢擴充功能**，並提交要求以啟用它。
1. **Adobe AEM團隊**&#x200B;將會檢閱並啟用您組織的擴充功能。
1. 啟用擴充功能後，請在&#x200B;**通用編輯器**中開啟頁面，例如：
   `https://author-p12345-e123456.adobeaemcloud.com/ui#/@org/aem/universal-editor/canvas/author-p12345-e123456.adobeaemcloud.com/content/en/example/home.html`
1. **預檢擴充功能**&#x200B;將出現在&#x200B;**側邊欄**&#x200B;中。
1. 從側邊欄選取&#x200B;**預檢擴充功能**，以啟動目前頁面的&#x200B;**預檢稽核**。

>[!TAB 文件型製作]

若要為檔案式製作設定「預檢」，請遵循下列步驟：

1. 將下列設定新增至Edge Delivery Services專案的GitHub存放庫中的`/tools/sidekick/config.json`：

   ```json
   {
     "plugins": [
       {
         "id": "preflight",
         "titleI18n": {
           "en": "Preflight"
         },
         "environments": ["preview"],
         "event": "preflight"
       }
     ]
   }
   ```

1. 建立新檔案`/tools/sidekick/aem-sites-optimizer-preflight.js`並新增下列內容：

   ```javascript
   (function () {
     let isAEMSitesOptimizerPreflightAppLoaded = false;
     function loadAEMSitesOptimizerPreflightApp() {
       const script = document.createElement('script');
       script.src = 'https://experience.adobe.com/solutions/OneAdobe-aem-sites-optimizer-preflight-mfe/static-assets/resources/sidekick/client.js?source=plugin';
       script.onload = function () {
         isAEMSitesOptimizerPreflightAppLoaded = true;
       };
       script.onerror = function () {
         console.error('Error loading AEMSitesOptimizerPreflightApp.');
       };
       document.head.appendChild(script);
     }
   
     function handlePluginButtonClick() {
       if (!isAEMSitesOptimizerPreflightAppLoaded) {
         loadAEMSitesOptimizerPreflightApp();
       }
     }
   
     // Sidekick V1 extension support
     const sidekick = document.querySelector('helix-sidekick');
     if (sidekick) {
       sidekick.addEventListener('custom:preflight', handlePluginButtonClick);
     } else {
       document.addEventListener('sidekick-ready', () => {
         document.querySelector('helix-sidekick')
           .addEventListener('custom:preflight', handlePluginButtonClick);
       }, { once: true });
     }
   
     // Sidekick V2 extension support
     const sidekickV2 = document.querySelector('aem-sidekick');
     if (sidekickV2) {
       sidekickV2.addEventListener('custom:preflight', handlePluginButtonClick);
     } else {
       document.addEventListener('sidekick-ready', () => {
         document.querySelector('aem-sidekick')
           .addEventListener('custom:preflight', handlePluginButtonClick);
       }, { once: true });
     }
   }());
   ```

1. 更新`loadLazy()`中的`/scripts/scripts.js`函式以匯入預覽URL的Preflight指令碼：

   ```javascript
   if (window.location.href.includes('.aem.page')) {
      import('../tools/sidekick/aem-sites-optimizer-preflight.js');
   }
   ```

1. 開啟您要稽核之頁面的預覽URL (`*.aem.page`)。
1. 在&#x200B;**Sidekick**&#x200B;中，按一下&#x200B;**預檢**&#x200B;按鈕以開始稽核目前頁面。

>[!TAB AEM Sites頁面編輯器]

若要在AEM Sites頁面編輯器中使用「預檢」，您可以在網頁瀏覽器中建立書籤小程式。 請依照下列步驟執行：

1. 在網頁瀏覽器中顯示您的&#x200B;**書籤列**：

   * 按&#x200B;**Ctrl+Shift+B** (Windows)或&#x200B;**Cmd+Shift+B** (Mac)。

！. 在瀏覽器中建立新書籤：

* 在書籤列上按一下滑鼠右鍵，然後選取&#x200B;**新頁面**&#x200B;或&#x200B;**新增書籤**。
* 在&#x200B;**位址(URL)**&#x200B;欄位中，貼上下列程式碼：

```javascript
javascript:(function(){const script=document.createElement('script');script.src='https://experience.adobe.com/solutions/OneAdobe-aem-sites-optimizer-preflight-mfe/static-assets/resources/sidekick/client.js?source=bookmarklet&target-source=aem-cloud-service';document.head.appendChild(script);})();
```

1. 為書籤命名&#x200B;**預檢** （或您偏好的任何名稱）。
1. 在`*.aem.page`AEM Sites頁面編輯器&#x200B;**中開啟您要稽核之頁面的預覽URL (**)。
1. 按一下書籤列中的&#x200B;**預檢**&#x200B;書籤，即可開始稽核目前頁面。

>[!ENDTABS]

## 最佳做法

執行Preflight稽核時，請謹記下列准則：

* 發佈到生產環境之前，一律在&#x200B;**測試或預覽頁面**&#x200B;上執行稽核。
* 優先解決&#x200B;**高影響問題**，例如連結中斷、缺少H1標籤或不安全的連結。
* 在執行稽核之前，請確定已針對受保護的臨時環境啟用&#x200B;**驗證**。
* 檢閱並套用&#x200B;**meta tag recommendations**&#x200B;以改善SEO效能。
